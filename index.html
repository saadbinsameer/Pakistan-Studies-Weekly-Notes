<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS1015 PAKISTAN STUDIES Notes</title>
    
    <!-- FAVICON LINK UPDATED: Now displays the White Stripe, Green Field, Crescent, and Star -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>%3Crect width='25' height='100' fill='white'/%3E%3Crect x='25' width='75' height='100' fill='%23059669'/%3E%3Ccircle cx='58' cy='50' r='22' fill='white'/%3E%3Ccircle cx='66' cy='50' r='18' fill='%23059669'/%3E%3Cpolygon points='42,48 46,58 56,60 46,62 42,72 38,62 28,60 38,58' fill='white'/%3E</svg>">
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply Inter font family */
        body {
            font-family: 'Inter', sans-serif;
            /* TASK 3: Updated transition for premium feel */
            transition: background-color 0.5s ease-in-out, color 0.5s ease-in-out; 
            /* Restore background to centered card layout */
            background: linear-gradient(to bottom right, #f0fdf4, #ccfbf1, #d9f99d); 
        }

        /* --- CSS for Padlock Icon (Font Awesome equivalent SVG) --- */
        .padlock-icon {
            opacity: 0.7; /* Subtly visible */
            margin-left: 0.5rem;
            color: #d1fae5; /* Very light color for contrast on button */
        }
        
        /* --- CSS for Locked Button Style --- */
        .locked-button {
            background-image: linear-gradient(to bottom right, #4b5563, #374151) !important; /* Darker gray background */
            cursor: not-allowed;
        }
        .locked-button:hover {
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.15), 
                0 0 10px rgba(75, 85, 99, 0.6); 
            transform: none; /* Disable normal hover scaling */
        }
        .locked-button:active {
            transform: none;
            box-shadow: none;
        }

        /* --- CSS Shake Animation --- */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .shake-animation {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            perspective: 1000px;
        }


        /* --- LIGHT MODE STYLES (Default) --- */
        
        /* 💡 Text shadow for the main title in light mode (requested earlier) */
        #main-title {
            color: #065f46; /* emerald-900 */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
        }

        #notes-content-wrapper {
            background-color: #ffffff; /* White background for the card */
            color: #1f2937; /* Default text color */
            /* TASK 3: Added transition to the card wrapper */
            transition: background-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out; 
        }

        #notes-title { 
            color: #065f46; /* emerald-800 */
            border-bottom: 2px solid #a7f3d0; /* emerald-200 */
        }
        
        /* Table Styles (Light Mode) */
        .notes-table th {
            background-color: #059669; /* emerald-600 */
            color: white;
            border-right: 1px solid #10b981;
        }
        .notes-table td {
            border-bottom: 1px solid #d1fae5; /* emerald-100 */
            border-right: 1px solid #d1fae5;
            padding: 1rem;
        }

        /* --- DARK MODE STYLES --- */
        body.dark-mode {
            background: #111827; /* gray-900 */
        }
        
        /* New CSS for main title glow in dark mode (acts as a stylish shadow/highlight) */
        body.dark-mode #main-title {
            color: #ecfdf5; /* text-emerald-50 for high contrast */
            text-shadow: 
                0 0 10px rgba(52, 211, 169, 0.7), /* Bright emerald base */
                0 0 20px rgba(167, 243, 208, 0.5); /* Soft outer glow */
        }
        
        body.dark-mode #notes-content-wrapper {
            background-color: #1f2937; /* gray-800 for content background */
            color: #e5e7eb; /* Light gray text */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5); 
        }
        body.dark-mode #notes-title { 
            border-bottom: 2px solid #10b981; /* emerald-500 */
            color: #a7f3d0;
        }

        /* Table Styles (Dark Mode) */
        body.dark-mode .notes-table {
            color: #d1fae5; /* Light text */
            border-collapse: separate;
            border-radius: 0.5rem;
            overflow: hidden; 
        }
        body.dark-mode .notes-table th {
            background-color: #047857; /* emerald-700 */
            color: #ecfdf5;
            border-right: 1px solid #065f46; /* emerald-800 */
        }
        body.dark-mode .notes-table td {
            background-color: #374151; /* gray-700 for rows */
            border-bottom: 1px solid #1f2937; /* gray-800 border */
            border-right: 1px solid #1f2937;
        }
        body.dark-mode .notes-table tr:hover td {
            background-color: #4b5563; /* gray-600 on hover */
        }
        
        /* Quote Glow (Dark Mode Only) */
        body.dark-mode .quote-glow-text {
            color: #d1fae5; /* Light green/mint color for contrast */
            text-shadow: 
                0 0 5px rgba(52, 211, 169, 0.5), /* subtle light glow */
                0 0 10px rgba(52, 211, 169, 0.3); /* wider, softer glow */
            transition: text-shadow 0.5s ease-in-out;
        }
        
        /* --- COMMON STYLES --- */
        .cool-glow-button {
            transition: all 0.3s ease-out;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.15), 
                0 0 10px rgba(52, 211, 169, 0.6); 
            position: relative;
        }
        .cool-glow-button:hover:not(.locked-button) {
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.2), 
                0 0 25px rgba(5, 150, 105, 0.8), 
                0 0 40px rgba(5, 150, 105, 0.5); 
            transform: scale(1.02); 
        }
        .cool-glow-button:active:not(.locked-button) {
            transform: scale(1.0); 
            box-shadow: 
                0 2px 10px rgba(0, 0, 0, 0.1),
                0 0 5px rgba(52, 211, 169, 0.4);
        }

        /* Enforce prose styling for better readability */
        #notes-content-area > * {
            max-width: none !important; 
        }
        
        /* Style the scrollbar for the content area */
        #notes-content-area::-webkit-scrollbar {
            width: 8px;
        }
        #notes-content-area::-webkit-scrollbar-thumb {
            background-color: #047857; /* Emerald-700 */
            border-radius: 4px;
        }
        body.dark-mode #notes-content-area::-webkit-scrollbar-track {
            background-color: #374151; /* Gray-700 */
        }
        #notes-content-area::-webkit-scrollbar-track {
            background-color: #d1fae5; /* Emerald-100 */
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <!-- Title Section - Remains outside the main content flow -->
    <header class="w-full max-w-5xl py-8 mb-4 flex justify-center px-4 md:px-0">
        <!-- drop-shadow-md class removed, replaced by custom CSS text-shadow on #main-title -->
        <h1 id="main-title" class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight text-emerald-900 
                   text-center 
                   transition-colors duration-300">
            SS1015 PAKISTAN STUDIES
        </h1>
    </header>

    <!-- MAIN CONTENT CONTAINER (Constrained to a medium-large card size) -->
    <main class="w-full max-w-lg md:max-w-xl lg:max-w-3xl flex-grow flex flex-col">

        <!-- Search Bar and Dark Mode Toggle Row (Combined) -->
        <div id="control-row" class="mb-8 flex items-center space-x-4 w-full px-4 md:px-0">
            
            <!-- Search Bar Container (Left side, takes up space. Hidden/Shown by JS) -->
            <div id="search-container" class="relative flex-grow order-1">
                <input 
                    type="text" 
                    id="search-input" 
                    oninput="handleSearch()"
                    placeholder="Useless feature..."
                    class="w-full p-3 pl-12 border-2 rounded-full text-lg shadow-md transition-colors duration-300 outline-none 
                            bg-white text-gray-800 border-gray-300 focus:ring-4 focus:ring-emerald-200 
                            dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700 dark:focus:ring-emerald-600/50"
                >
                <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>

            <!-- Dark Mode Toggle Button (Right side, fixed width) -->
            <button id="dark-mode-toggle" 
                    onclick="toggleDarkMode()" 
                    aria-label="Toggle Dark Mode"
                    class="p-4 rounded-full bg-emerald-600 text-white shadow-lg hover:bg-emerald-700 transition duration-300 flex-shrink-0 order-2"
                    title="Toggle Dark Mode"
            >
                <!-- Icons are handled by JS to show/hide -->
                <svg id="sun-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                <svg id="moon-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
            </button>
        </div>


        <!-- 1. HOME VIEW (Buttons Grid) -->
        <div id="home-view" class="p-0 w-full">
            
            <!-- Search Bar Container was here, now moved to control-row -->

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="week-buttons-container">
                <!-- Buttons will be generated here by JavaScript -->
            </div>
            
            <p id="no-results-message" class="text-center text-xl text-gray-500 mt-10 hidden">
                No notes found matching your search term.
            </p>
        </div>

        <!-- 2. NOTES CARD VIEW (Restored Card Design) -->
        <div id="notes-view" class="w-full hidden mt-4">
            
            <!-- Wrapper for content (The Card itself) -->
            <div id="notes-content-wrapper" class="flex flex-col p-6 md:p-8 rounded-xl shadow-2xl transition-colors duration-300">

                <!-- Notes Title -->
                <header class="mb-6 pb-2">
                    <h2 id="notes-title" class="text-3xl md:text-4xl font-bold border-b transition-colors duration-300"></h2>
                </header>
                
                <!-- Notes Content Area - Scrollable (Fixed height inside the card) -->
                <div id="notes-content-area" 
                     class="space-y-4 prose max-h-[70vh] overflow-y-auto pr-4 pb-8"
                     style="max-width: 100%;" >
                    <!-- Content will be injected here -->
                </div>
                
                <!-- Back Button Area -->
                <footer class="mt-4 pt-4 border-t border-emerald-300/50 dark:border-gray-600">
                    <div class="flex justify-center">
                        <button 
                            onclick="showHome()"
                            id="back-button"
                            class="px-8 py-3 bg-emerald-800 text-white font-bold rounded-full 
                                shadow-xl hover:shadow-2xl hover:bg-emerald-700 
                                transition duration-300 ease-in-out 
                                flex items-center justify-center 
                                w-full max-w-xs"
                        >
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                            <!-- TEXT CHANGED FROM 'Back to Weeks' to 'Back' -->
                            <span class="tracking-wider">Back</span>
                        </button>
                    </div>
                </footer>
            </div>
        </div>
        
    </main>

    <!-- Custom Message Box -->
    <div id="message-box" class="hidden fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-4 bg-emerald-700 text-white rounded-xl shadow-2xl transition-opacity duration-300 z-50 max-w-xs text-center font-bold text-lg">
        <span id="message-text"></span>
    </div>

    <!-- Footer Text (for home screen) -->
    <footer id="global-footer" class="mt-12 py-4 w-full max-w-5xl border-t border-emerald-300/50 flex justify-center items-center px-4 md:px-0">
        <p class="text-sm italic text-center quote-glow-text" id="footer-text">
            "With faith, discipline and selfless devotion to duty, there is nothing worthwhile that you cannot achieve." 
            <span class="block not-italic mt-1 font-medium"> - Quaid</span>
        </p>
    </footer>
    
    <script>
        // Global variable to store notes data
        const weeklyNotes = {
            "1": { 
                "title": "Week 1: The Indus Valley Civilization", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">The Indus Valley Civilization (IVC)</h3>
                    <p class="mb-4">The IVC, or Harappan Civilization (c. 3300–1300 BCE), was South Asia's earliest urban culture, centered on the Indus River system in modern Pakistan.</p>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🗺️ Geography and Urban Centers</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Extent:</strong> Stretched from Baluchistan to Gujarat, relying on the Indus River and its tributaries.</li>
                        <li><strong>Harappa (Punjab):</strong> Critical northern urban center.</li>
                        <li><strong>Mohenjo-Daro (Sindh):</strong> Largest and best-preserved city, famed for its advanced municipal structures like the Great Bath.</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🏗️ Civic Life and Urban Planning</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Architecture:</strong> Cities used a meticulous <strong>Grid System</strong> and universally sized fired bricks.</li>
                        <li><strong>Dual Structure:</strong> Major cities featured a <strong>Citadel</strong> (administration/ritual) and a <strong>Lower Town</strong> (residential).</li>
                        <li><strong>Public Health:</strong> Possessed the world's earliest known advanced urban sanitation systems, including covered drains beneath the streets and private wells/toilets in most houses.</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">💼 Economy and Society</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Economic Base:</strong> Primarily agriculture (wheat and barley) and <strong>Craft Specialization</strong> (bead-making, bronze casting, seal carving).</li>
                        <li><strong>Trade:</strong> Used standardized steatite seals, weights, and measures. Maintained <strong>Long-Distance Trade</strong> with Mesopotamia and Iran.</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">📉 Theories of Decline (c. 1900–1300 BCE)</h3>
                    <p>The collapse was prolonged and attributed to a combination of factors:</p>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Environmental:</strong> Climate Variability and Drought (weakening of the monsoon) and Hydrological Shifts (tectonic changes to river courses).</li>
                        <li><strong>Infrastructure Strain:</strong> Repeated, major floods required perpetual maintenance, leading to economic drain and de-urbanization.</li>
                    </ul>
                `
            },
            "2": { 
                "title": "Week 2: Pakistani Culture and Society", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">🌍 Understanding Culture</h3>
                    <ul class="list-disc list-inside space-y-1 ml-4">
                        <li><strong>Definition:</strong> The learned, shared, and symbolic way of life of a people.</li>
                        <li><strong>Types:</strong>
                            <ul class="list-circle list-inside ml-6 space-y-1">
                                <li>Material culture: Tangible elements (tools, architecture).</li>
                                <li>Non-material culture: Intangible aspects (beliefs, values, customs).</li>
                            </ul>
                        </li>
                        <li><strong>Norms:</strong> Folkways (everyday customs) and Mores (stronger norms tied to morality).</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🏞️ Layers of Pakistani Culture</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Influences:</strong> Indus Valley roots &rarr; Islamic era (8th century) &rarr; Mughal synthesis &rarr; British colonial changes.</li>
                        <li><strong>Cultural Blend:</strong> Indigenous traditions + Islamic framework + Persian/Central Asian + colonial legacies.</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🏘️ Layers of Pakistani Culture</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Social Structure:</strong> Strong extended family networks; dominant role of religion; regional diversity unified by national identity.</li>
                        <li><strong>Change:</strong> Urbanization and modern education are transforming traditional patterns.</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🗣️ Linguistic Heritage</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>National Language:</strong> Urdu (lingua franca, rooted in Persian, Arabic, and local dialects).</li>
                        <li><strong>Regional Languages:</strong> Punjabi, Sindhi, Pashto, Balochi, Saraiki, Hindko (preserve local identity).</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🎉 Traditions and Customs</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Rituals:</strong> Life-cycle rituals (birth, marriage, death), Islamic festivals (Eid), and regional festivals.</li>
                        <li><strong>Dress:</strong> Shalwar kameez (national dress).</li>
                        <li><strong>Core Values:</strong> Hospitality, communal meals, and ritual observances.</li>
                    </ul>
                `
            },
            "3": { 
                "title": "Week 3: The Process of Constitution Making (1947–1954)", 
                // TASK 3: Table removed and content reverted to simple list structure
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">📜 Governing Framework After Independence</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Interim Constitution:</strong> The <strong>Government of India Act, 1935</strong> (adapted).</li>
                        <li><strong>Constituent Assembly:</strong> Served a dual role: framing the constitution and acting as the central legislature.</li>
                        <li><strong>Leaders:</strong> <strong>Muhammad Ali Jinnah</strong> (first Governor-General, 1947–1948) and <strong>Liaquat Ali Khan</strong> (first Prime Minister, 1947–1951).</li>
                    </ul>
                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🚨 Early Challenges (1947–1954)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Refugee Crisis:</strong> Massive migration (8–10 million) created acute shortages.</li>
                        <li><strong>Administrative Weakness:</strong> Lack of trained bureaucrats and infrastructure.</li>
                        <li><strong>Financial Problems:</strong> Delayed division of assets with India (Rs. 750 million share withheld).</li>
                        <li><strong>Territorial & Security:</strong> Conflict in Kashmir (Oct 1947).</li>
                        <li><strong>Political Instability:</strong> 7 Prime Ministers and 4 Governor Generals between 1947 and 1956.</li>
                        <li><strong>Language Movement (1952):</strong> Tensions over Urdu being the sole national language; protests in Dhaka (21 Feb 1952) became a turning point in East Pakistan’s consciousness.</li>
                        <li><strong>Anti-Ahmadiya Riots (1953):</strong> Led to the brief imposition of <strong>Martial Law in Lahore</strong> (first use of military in politics).</li>
                        <li><strong>Dissolution of First Constituent Assembly (24 October 1954):</strong> Governor-General Ghulam Mohammad dissolved the assembly. The Federal Court upheld the action(<strong>Doctrine of Necessity</strong>), setting a precedent for validating extra-constitutional steps.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🔑 Key Events & Milestones (1947-1954)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>1947 (Oct) - First Kashmir War:</strong> Confirmed territorial/security conflict as a national priority.</li>
                        <li><strong>1949 (Mar) - Objectives Resolution:</strong> Foundation of Pakistan's constitution; established Islamic principles and democracy.</li>
                        <li><strong>1952 (Feb) - Language Movement:</strong> Protests in Dhaka against Urdu as sole language; marker of East-West tension.</li>
                        <li><strong>1953 (Mar) - Anti-Ahmadiya Riots:</strong> Led to the first imposition of Martial Law in Lahore.</li>
                        <li><strong>1954 (Oct) - Dissolution of Assembly:</strong> Governor-General Ghulam Mohammad used emergency powers; affirmed by Doctrine of Necessity.</li>
                    </ul>
                `
            },
            "4": { 
                "title": "Week 4: Origin of the State & Enlightenment Thought", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">🏛️ Four Classical Theories on the Origin of the State</h3>
                    <ul class="list-disc list-inside space-y-3 ml-4">
                        <li>
                            <strong>Force Theory:</strong> State arises when one group uses coercion/conquest to dominate a population. 
                            <span class="block text-sm text-gray-500 dark:text-gray-400 ml-4">(Key Point: Legitimacy flows from domination.)</span>
                        </li>
                        <li>
                            <strong>Evolutionary Theory:</strong> State develops slowly and naturally out of early social units (family &rarr; clan &rarr; tribe). 
                            <span class="block text-sm text-gray-500 dark:text-gray-400 ml-4">(Key Point: Result of natural social evolution.)</span>
                        </li>
                        <li>
                            <strong>Divine Right Theory:</strong> Rulers are established by divine will; obedience to the ruler is obedience to God. 
                            <span class="block text-sm text-gray-500 dark:text-gray-400 ml-4">(Key Point: Challenge to ruler is sacrilegious.)</span>
                        </li>
                        <li>
                            <strong>Social Contract Theory:
                            </strong> State formed when individuals consent to surrender some freedoms in return for security and order. 
                            <span class="block class="text-sm text-gray-500 dark:text-gray-400 ml-4">(Key Point: Foundational theory for modern democracy; government by consent.)</span>
                        </li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">💡 Core Ideas of Enlightenment Political Thinkers</h3>
                    
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">John Locke:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Core Concept:</strong> Natural Rights (Life, Liberty, Property) &amp; Limited Government.</li>
                        <li><strong>Contribution:</strong> Government must protect rights and is legitimate only by consent of the governed (Two contracts: People-People, People-Government).</li>
                    </ul>

                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Jean-Jacques Rousseau:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Core Concept:</strong> The General Will (Sovereignty belongs to the collective people).</li>
                        <li><strong>Contribution:</strong> Favored direct democracy and stressed that every person must protect the rights of others.</li>
                    </ul>

                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Montesquieu:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Core Concept:</strong> Separation of Powers.</li>
                        <li><strong>Contribution:</strong> Proposed dividing authority into three branches (Legislative, Executive, Judicial) with checks-and-balances to prevent tyranny.</li>
                    </ul>

                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Thomas Hobbes (Contrasting View):</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Core Concept:</strong> Human nature is brutal and selfish (needs control).</li>
                        <li><strong>Contribution:</strong> People transfer all rights to a single Sovereign (Monarch) who is not accountable to the public (Monarchy system).</li>
                    </ul>
                `
            },
            "5": { 
                "title": "Week 5: Democracy in Pakistan", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">⚖️ Introduction: What is Democracy?</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Definition:</strong> Government where decision-making is vested in the people (right to choose leaders).</li>
                        <li><strong>Core Principles:</strong> <strong>Political Equality</strong>, <strong>Constitutionalism &amp; Rule of Law</strong>, <strong>Accountability</strong>, and <strong>Protection of Rights</strong>.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🗳️ Types of Democratic Systems</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Direct Democracy:</strong> Citizens participate directly (e.g., referendums).</li>
                        <li><strong>Representative (Indirect) Democracy:</strong> Public chooses representatives through elections (most common).</li>
                        <li><strong>Social Democracy:</strong> Emphasis on welfare and equality (welfare state concept); political rights must be linked to social welfare for meaningful participation.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">📜 Historical Overview: Key Phases</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Early Years (1947–56):</strong> Jinnah, Liaquat; Objectives Resolution (1949); first Constitution (1956).</li>
                        <li><strong>First Martial Law (1958–1969):</strong> Ayub Khan abrogates constitution; introduces 1962 Constitution (presidential) and <strong>Basic Democracy (BD) System</strong> (indirect election/decentralization).</li>
                        <li><strong>Bhutto Era to Zia (1970–1988):</strong> <strong>1973 Constitution</strong> (Parliamentary); 1977 Coup by General Zia-ul-Haq (military Islamization).</li>
                        <li><strong>Alternating Rule (1988–1999):</strong> Instability between PPP/PML; ended by 1999 Coup (Musharraf).</li>
                        <li><strong>Anti-Corruption Tools:</strong> PODO (Public Officer Disqualification Order) and EBDO (Elective Bodies Disqualification Order).</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">❌ Reasons for the Failure of Democracy (Concise Analysis)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Weak Political Parties:</strong> Built around personalities/families rather than ideology or internal democracy.</li>
                        <li><strong>Absence of a Vibrant Civil Society:</strong> Independent unions and associations are weak or suppressed.</li>
                        <li><strong>Lack of Social Democracy:</strong> Political rights lack accompanying welfare, land reform, or redistribution.</li>
                        <li><strong>Elitist Politics/Oligarchy:</strong> Dominated by landlords, industrialists, and powerful families (patronage/feudalism).</li>
                        <li><strong>Bureaucratic and Military Influence:</strong> Military sees itself as the guardian of the state; repeated coups undermine elected authority.</li>
                        <li><strong>Judicialization of Politics:</strong> Courts validated extra-constitutional acts via the <strong>Doctrine of Necessity</strong>, weakening legal safeguards.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">✅ The Future: Needs for Durable Democracy</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Constitutional Supremacy:</strong> All institutions must operate strictly within constitutional limits.</li>
                        <li><strong>Strengthening Parties:</strong> Internal democracy and meritocratic leadership.</li>
                        <li><strong>Social Democracy Measures:</strong> Land reform, progressive taxation, and better public services.</li>
                        <li><strong>Civilian Control:</strong> Clear limits on military's political role and bureaucratic accountability.</li>
                    </ul>
                `
            },
            // --- WEEK 6: Now dedicated to the Exam. Uses a unique identifier instead of 'pending completion' ---
            "6": { 
                "title": "Week 6: Mid 1 Era (Exam Week)", 
                // Using a unique content flag to trigger the special message in navigateToWeek
                "content": "EXAM_WEEK_MID1_TRIGGER" 
            },
            // --------------------------------------------------------------------------------------------------
            "7": { 
                "title": "Week 7: Federalism in Pakistan", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">⚖️ Centralization vs. Decentralization</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Centric (Centralized):</strong> Capital has maximum authority.</li>
                        <li><strong>Decentric (Decentralized):</strong> Power is properly distributed (provinces have autonomy).</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🤝 Essential Elements of Federalism</h3>
                    
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Division of Legislative Power:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Federal List:</strong> Exclusive central powers (Defense, Currency).</li>
                        <li><strong>Provincial List:</strong> Exclusive provincial powers (Education, Health).</li>
                        <li><strong>18th Constitutional Amendment (2010):</strong> Abolished the Mutual/Concurrent List, transferring ~47 subjects to provinces, granting more power and autonomy.</li>
                    </ul>
                    
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Written and Semi-Rigid Constitution:</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>Requires a written constitution to define boundaries.</li>
                        <li>Amendable, but requires a 2/3 majority vote in both the Senate and National Assembly.</li>
                    </ul>
                    
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Bicameralism (Two Houses):</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Upper House (Senate):</strong> Seats based on equality among provinces.</li>
                        <li><strong>Lower House (National Assembly - NA):</strong> Seats based on population.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">💰 Financial Federalism and Budget</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Budget Division:</strong> Approximately 60% to provinces, 40% to Centre (via NFC Award).</li>
                        <li><strong>Power Flow Structure (Normal):</strong> Centre &rarr; Provincial &rarr; Local Government.</li>
                        <li><strong>Power Flow Structure (During Martial Law):</strong> Centre &rarr; Local Government (bypassing provinces).</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">📍 Demands for New Provinces and Regional Conflicts</h3>
                    <p>The core issue is administrative and economic injustice from unequal resource distribution.</p>

                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Seraikistan (Southern Punjab):</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Demand:</strong> Separate province for Seraiki population; a move to revive the former Bahawalpur Province.</li>
                        <li><strong>Conflict:</strong> Opposed by Northern Punjab, Balochistan Assembly, and Sindhi Nationalists (fearing precedent).</li>
                    </ul>

                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Muhajir/Urban Sindh (Karachi &amp; Hyderabad):</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Issue:</strong> Sindh's budget concentrated in urban areas.</li>
                        <li><strong>Political Action:</strong> MQM proposed new provinces (2012), vehemently opposed by Sindhi nationalists.</li>
                    </ul>

                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Hazarawal (KPK):</strong> Demand for separate province based on linguistic differences (Hindko speakers).</li>
                        <li><strong>Afghania or Pakhtoonistan (Northern Balochistan):
                            </strong> Demand for a Pakhtun-majority province/merger with KPK.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🏛️ Role of Mainstream Political Parties in Province Creation</h3>
                    <p>PML-N/PPP/PML-Q: Used the demand for Seraikistan and the restoration of Bahawalpur primarily for political leverage and election narratives, rather than achieving consensus-based constitutional change. Demands faced strong rejection in relevant provincial assemblies (e.g., MQM demands in KP Assembly).</p>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">💡 Conclusion: The Challenge of New Provinces (Exam-Ready)</h3>
                    <p>The creation of new provinces is a highly politicized challenge to Pakistan's federation. Supporters argue it ensures equitable resource distribution and empowers ethnic identities, strengthening democracy. Opponents fear it will 'open Pandora's box' regarding representation and further instability. The consensus of all stakeholders is required for a rational solution.</p>
                `
            },
            "8": { 
                "title": "Week 8: Local Governments in Pakistan", 
                "content": `
                    <h3 class="text-xl md:text-2xl font-semibold mt-4 mb-2 text-emerald-700">🏛️ Local Governments in Pakistan</h3>
                    <p class="mb-2"><strong>Power Flow:</strong> Centre &rarr; Province &rarr; Local Government.</p>
                    <p class="mb-4"><strong>Context:</strong> Pakistan transitioned towards a <strong>National Security State model</strong> which solidified after the 1977 coup.</p>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">📜 Historical Attempts at Decentralization (1540–Present)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Sher Shah Suri (1540–1545):</strong> Introduced the concept of <strong>Decentralization of Power</strong> through administrative reforms.</li>
                        <li><strong>British Raj (Post-1919):</strong> Initiated <strong>Decentralization of Power</strong> from the Centre to Local Governments.</li>
                        <li><strong>Ayub Khan (1959):</strong> Introduced the <strong>Basic Democracy (BD) System</strong>.</li>
                        <li><strong>Z.A. Bhutto (1973/1975):</strong> Introduced Local Government Ordinances (LGOs) (attempts to legislate, often short-lived).</li>
                        <li><strong>Zia ul Haq (1979–1993):</strong> Initiated LGO (ran successfully for over a decade).</li>
                        <li><strong>Democratic Gap (1993–1999):</strong> Period with no operational LGOs.</li>
                        <li><strong>Pervez Musharraf (2001–2010):</strong> Introduced the <strong>Devolution Plan (LGO 2001)</strong> (Pre-18th Amendment).</li>
                        <li><strong>Post-18th Amendment (2010–Present):</strong> Article 140-A mandated Local Government; provinces significantly delayed implementation of elections and full devolution.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">1959 Basic Democracy (BD) System: Structure and Flaws</h3>
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">1. BD Structure (4 Tiers)</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>
                            <strong>Union Council/Committee (Grassroots Level):</strong>
                            <ul class="list-circle list-inside ml-6">
                                <li>Function: Handles street lights, written records, etc.</li>
                                <li>Elections: Council members elected directly by the public.</li>
                                <li>Chairman: Elected indirectly by the council members.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Tehsil/Thana:</strong>
                            <ul class="list-circle list-inside ml-6">
                                <li>Membership: Composed of Chairmen of Union Councils (Official/Non-official).</li>
                                <li>Link with Public: No direct link.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>District Council:</strong>
                            <ul class="list-circle list-inside ml-6">
                                <li>Membership: Chairmen of Tehsil Councils.</li>
                                <li>Function: Members elect their own District Chairmen.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Divisional:</strong>
                            <ul class="list-circle list-inside ml-6">
                                <li>Head: Appointed by the President (Highest tier).</li>
                            </ul>
                        </li>
                    </ul>

                    <h4 class="text-lg md:text-xl font-medium mt-6 mb-1 text-emerald-600">2. Key Flaws of the BD System</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Bureaucratic Control:</strong> The Assistant/District Commissioner (AC/DC), selected via competitive exams, retained actual power and defied devolution. This prevented new leadership from emerging and allowed the same political elite to retain control.</li>
                        <li><strong>Presidential Election (Electoral College):</strong> The BD members (80,000) served as the Electoral College (EC) for indirectly electing the President (under the 1962 Constitution). This centralized control ensured the President was often selected by the dominant political parties/establishment rather than by merit or direct public will.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">1979 LGO System: Dual (Rural/Urban) Structure</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Rural Structure:</strong> Union &rarr; Tehsil &rarr; District.
                            <span class="block text-sm text-gray-500 dark:text-gray-400 ml-4">
                            Union members are directly elected; they indirectly elect Tehsil members, who elect District members (Chairmen of Tehsil).
                            </span>
                        </li>
                        <li><strong>Urban Structure:</strong> Town Committees &rarr; Municipal Committees &rarr; Municipal Corporation &rarr; Metropolitan.
                            <span class="block text-sm text-gray-500 dark:text-gray-400 ml-4">
                            All urban bodies had direct elections by the public; members then elected their own Chairmen.
                            </span>
                        </li>
                        <li><strong>Supervision:</strong> Overall supervision remained with the Deputy Commissioner (DC), who maintained indirect control and permitted all important tasks.</li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">2001 LGO (Musharraf's Devolution Plan)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>Structure:</strong> Division occurred in three steps: Union &rarr; Tehsil &rarr; District.</li>
                        <li>
                            <strong>Elected Leaders (Nazims):</strong>
                            <ul class="list-circle list-inside ml-6">
                                <li>Union members were directly elected, choosing a <strong>Nazim (Chairman/Mayor)</strong> and a Naib Nazim (Vice Chairman).</li>
                                <li>The Naib Nazim of the Union was a member of the Tehsil Council.</li>
                                <li>Tehsil members chose the Tehsil Nazim.</li>
                                <li>All Nazims were members of the District Council.</li>
                            </ul>
                        </li>
                        <li><strong>Advantage over BD:</strong> This LGO was superior because power remained closer to the grassroots level and removed the centralized bureaucracy.</li>
                        <li><strong>Administrative Change (DCO):</strong> The Deputy Commissioner (DC) position was removed from these levels. Instead, the <strong>District Coordinating Officer (DCO)</strong> was introduced, with deliberately limited administrative powers to prevent bureaucratic interference.</li>
                        </li>
                    </ul>

                    <h3 class="text-xl md:text-2xl font-semibold mt-6 mb-2 text-emerald-700">🏛️ Structural Comparison of Provincial Local Government Acts (2013)</h3>
                    <p class="mb-2">This comparison highlights the key differences in structure, tiers, and election methodology across the four provinces following the 18th Amendment (Post-2010).</p>
                    <h4 class="text-lg md:text-xl font-medium mt-4 mb-1 text-emerald-600">Comparison of Local Government Structures (Post-18th Amendment)</h4>
                    
                    <h5 class="text-base md:text-lg font-semibold mt-4 mb-1 text-emerald-700">🇵🇰 Khyber Pakhtunkhwa (KPLGA 2013):</h5>
                    <ul class="list-disc list-inside space-y-1 ml-6 text-sm">
                        <li><strong>Model:</strong> Heavily based on LGO 2001 (Devolution).</li>
                        <li><strong>Structure:</strong> Unified tiers: District Council &rarr; Tehsil Council &rarr; (Neighborhood/Village Council).</li>
                        <li><strong>Election:</strong> Features <strong>Direct Election for all four tiers</strong> (Nazim/Naib Nazim).</li>
                        <li><strong>Distinction:</strong> No functional difference between urban (Neighborhood) and rural (Village) grassroots councils.</li>
                    </ul>

                    <h5 class="text-base md:text-lg font-semibold mt-4 mb-1 text-emerald-700">🇵🇰 Punjab (PLGA 2013):</h5>
                    <ul class="list-disc list-inside space-y-1 ml-6 text-sm">
                        <li><strong>Model:</strong> Dual Urban/Rural system with segregated functions.</li>
                        <li><strong>Structure (Urban):</strong> Metro &rarr; Municipal Corp &rarr; Municipal Comm &rarr; Urban Union.</li>
                        <li><strong>Structure (Rural):</strong> District Council &rarr; Rural Union.</li>
                        <li><strong>Distinction:</strong> Unique for separating Health and Education into independent, appointed Authorities.</li>
                        <li><strong>Election:</strong> Lower tiers are Direct; higher tiers are generally Indirect (formed by lower tier members).</li>
                    </ul>

                    <h5 class="text-base md:text-lg font-semibold mt-4 mb-1 text-emerald-700">🇵🇰 Sindh (SLGA 2013):</h5>
                    <ul class="list-disc list-inside space-y-1 ml-6 text-sm">
                        <li><strong>Model:</strong> Dual Urban/Rural system.</li>
                        <li><strong>Structure (Urban):</strong> Most complex with five tiers: Metro &rarr; DMC &rarr; Municipal Comm &rarr; Town Comm &rarr; Union Committee (foundation).</li>
                        <li><strong>Structure (Rural):</strong> District Council &rarr; Union Council.</li>
                        <li><strong>Distinction:</strong> Introduced the Union Committee as the foundational urban tier.</li>
                        <li><strong>Election:</strong> Lower tiers are Direct.</li>
                    </ul>

                    <h5 class="text-base md:text-lg font-semibold mt-4 mb-1 text-emerald-700">🇵🇰 Balochistan (BLGA 2010):</h5>
                    <ul class="list-disc list-inside space-y-1 ml-6 text-sm">
                        <li><strong>Model:</strong> Simpler tiered structure.</li>
                        <li><strong>Structure (Urban):</strong> Metro &rarr; Municipal Corp &rarr; Municipal Comm.</li>
                        <li><strong>Structure (Rural):</strong> District Council &rarr; Union Council.</li>
                        <li><strong>Election:</strong> Relies on <strong>Direct Election for members</strong> of all primary bodies.</li>
                    </ul>
                    
                    <h4 class="text-lg md:text-xl font-medium mt-6 mb-1 text-emerald-600">Summary of Key Structural Differences</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><strong>KPK</strong> is the most decentralized, featuring direct election for all four tiers and adopting the Nazim/Naib Nazim model (LGO 2001-style).</li>
                        <li><strong>Punjab</strong> maintains a strong Urban/Rural separation and is unique for separating Health and Education into appointed, specialized Authorities.</li>
                        <li><strong>Sindh</strong> has the most complex urban structure with multiple tiers (Union Committee &rarr; Town Committee &rarr; Municipal Committee &rarr; DMC &rarr; Metropolitan).</li>
                        <li><strong>Balochistan</strong> uses a simpler three-tiered urban structure and relies on direct election for its main urban and rural bodies.</li>
                    </ul>
                `
            },
            "9": { "title": "Week 9: Post-Midterm Topics", "content": `<p class="text-xl md:text-2xl">Notes for Week 9 are pending completion. Chill bro!</p>` },
            "10": { "title": "Week 10: Post-Midterm Topics", "content": `<p class="text-xl md:text-2xl">Notes for Week 10 are pending completion. Chill bro!</p>` },
            "11": { "title": "Week 11: Post-Midterm Topics", "content": `<p class="text-xl md:text-2xl">Notes for Week 11 are pending completion. Chill bro!</p>` },
            "12": { "title": "Week 12: Post-Midterm Topics", "content": `<p class="text-xl md:text-2xl">Notes for Week 12 are pending completion. Chill bro!</p>` },
            "13": { "title": "Week 13: Post-Midterm Topics", "content": `<p class="text-xl md:text-2xl">Notes for Week 13 are pending completion. Chill bro!</p>` },
            "14": { "title": "Week 14: Final Review", "content": `<p class="text-xl md:text-2xl">Notes for Week 14 are pending completion. Chill bro!</p>` }
        };

        // --- Dark Mode Functionality ---
        function applyTheme(isDark) {
            const body = document.body;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            const toggleButton = document.getElementById('dark-mode-toggle');

            if (isDark) {
                body.classList.add('dark-mode');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
                toggleButton.classList.remove('bg-emerald-600', 'hover:bg-emerald-700');
                toggleButton.classList.add('bg-emerald-700', 'hover:bg-emerald-600'); 
            } else {
                body.classList.remove('dark-mode');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
                toggleButton.classList.remove('bg-emerald-700', 'hover:bg-emerald-600');
                toggleButton.classList.add('bg-emerald-600', 'hover:bg-emerald-700');
            }
        }

        function toggleDarkMode() {
            const isDark = document.body.classList.contains('dark-mode');
            const newMode = !isDark;
            applyTheme(newMode);
            localStorage.setItem('darkMode', newMode ? 'enabled' : 'disabled');
        }

        function loadThemePreference() {
            const savedMode = localStorage.getItem('darkMode');
            if (savedMode === 'enabled' || (!savedMode && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                applyTheme(true);
            } else {
                applyTheme(false);
            }
        }


        // --- View Management Functions (Simple toggle display) ---

        function showMessage(message, elementToShake) {
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
            
            if (elementToShake) {
                elementToShake.classList.add('shake-animation');
            }

            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); 
            
            // Remove shake animation after it finishes
            setTimeout(() => {
                if (elementToShake) {
                    elementToShake.classList.remove('shake-animation');
                }
            }, 500); // Must match the animation duration
        }

        function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('notes-view').classList.add('hidden');
            // Show search bar on homepage
            document.getElementById('search-container').classList.remove('hidden');
            // Ensure dark mode toggle is visible on the home screen
            document.getElementById('dark-mode-toggle').classList.remove('hidden');
            // Show the footer again
            document.getElementById('global-footer').classList.remove('hidden');
        }

        function navigateToWeek(weekNumber, buttonElement) {
            const notesData = weeklyNotes[weekNumber];
            
            if (!notesData) {
                showMessage(`Error: Invalid week number ${weekNumber}.`);
                return;
            }

            // --- Week 6 Exam Trigger ---
            if (notesData.content === "EXAM_WEEK_MID1_TRIGGER") {
                // User requested message: Mid 1 Era
                showMessage("Mid 1 Era", buttonElement);
                return;
            }
            // ------------------------------------
            
            const isPlaceholder = notesData.content.includes("pending completion");
            
            if (isPlaceholder) {
                // Handle Locked Week Interaction
                showMessage("Study more to unlock this week", buttonElement);
                return;
            }
            
            // --- FIX 2: Remove "Week X: " prefix from the title for display ---
            let displayTitle = notesData.title;
            // Use regex to capture everything after "Week [Number]: "
            const titleMatch = notesData.title.match(/^Week\s+\d+:\s*(.*)$/);
            if (titleMatch && titleMatch[1]) {
                displayTitle = titleMatch[1].trim();
            }
            // ----------------------------------------------------------------

            // Update content
            document.getElementById('notes-title').textContent = displayTitle; // Use the modified title
            document.getElementById('notes-content-area').innerHTML = notesData.content;
            document.getElementById('notes-content-area').scrollTop = 0; // Reset scroll position

            // Toggle views
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('notes-view').classList.remove('hidden');
            // Hide search bar when navigating to notes view
            document.getElementById('search-container').classList.add('hidden');
            // Hide dark mode toggle when navigating to notes view
            document.getElementById('dark-mode-toggle').classList.add('hidden'); 

            // Hide the footer while in notes view
            document.getElementById('global-footer').classList.add('hidden');
        }

        // Padlock SVG Icon (18px x 18px)
        const padlockIconSVG = `
            <svg class="padlock-icon w-5 h-5 ml-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        `;

        // --- Button Rendering & Search Functionality ---

        function getSubtitle(i) {
             if (i === 1) return 'The Indus Valley Civilization';
             if (i === 2) return 'Pakistani Culture and Society';
             if (i === 3) return 'The Process of Constitution Making';
             if (i === 4) return 'Origin of the State & Enlightenment Thought';
             if (i === 5) return 'Democracy in Pakistan';
             if (i === 6) return ''; // Week 6 Title is removed per user request
             if (i === 7) return 'Federalism in Pakistan';
             if (i === 8) return 'Local Governments in Pakistan'; 
             return ''; 
        }

        function isWeekLocked(i) {
            const notes = weeklyNotes[i];
            // Week 6 uses the EXAM_WEEK_MID1_TRIGGER flag, which should not be considered 'locked'
            if (notes && notes.content === "EXAM_WEEK_MID1_TRIGGER") {
                return false;
            }
            return notes && notes.content.includes("pending completion");
        }

        function renderButtons(filteredKeys) {
            const container = document.getElementById('week-buttons-container');
            const noResultsMessage = document.getElementById('no-results-message');
            container.innerHTML = ''; // Clear existing buttons
            
            if (filteredKeys.length === 0) {
                noResultsMessage.classList.remove('hidden');
                return;
            } else {
                noResultsMessage.classList.add('hidden');
            }

            const activeGradientClasses = 'from-emerald-700 to-green-900 hover:from-emerald-800 hover:to-green-950';

            filteredKeys.forEach(i => {
                const subtitle = getSubtitle(i);
                const isLocked = isWeekLocked(i);
                const buttonId = `week-${i}`;
                
                const subtitleDisplay = subtitle ? 
                    `<span class="text-xs sm:text-sm font-light -mt-1 opacity-80 leading-tight">${subtitle}</span>` 
                    : ''; // Only render span if subtitle exists

                const buttonContent = `
                    <div class="flex flex-col items-center text-center px-1">
                        <span class="text-2xl font-bold">Week ${i}</span>
                        ${subtitleDisplay}
                    </div>
                    ${isLocked ? padlockIconSVG : ''}
                `;
                
                const lockedClass = isLocked ? 'locked-button' : '';
                const gradientClass = isLocked ? '' : `bg-gradient-to-br ${activeGradientClasses}`;
                const cursorClass = isLocked ? 'cursor-not-allowed' : 'cursor-pointer';

                const buttonHtml = `
                    <button 
                        id="${buttonId}"
                        class="
                            w-full 
                            h-24  
                            ${gradientClass}
                            ${lockedClass}
                            text-white 
                            text-xl sm:text-2xl font-semibold 
                            rounded-xl 
                            cool-glow-button 
                            focus:outline-none focus:ring-4 focus:ring-amber-400 
                            flex items-center justify-center 
                            ${cursorClass}
                        "
                        onclick="navigateToWeek(${i}, document.getElementById('${buttonId}'))"
                    >
                        ${buttonContent}
                    </button>
                `;
                container.innerHTML += buttonHtml;
            });
        }
        
        function handleSearch() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const weekKeys = Object.keys(weeklyNotes).map(key => parseInt(key)).sort((a, b) => a - b);
            
            if (!query) {
                renderButtons(weekKeys);
                return;
            }

            const filteredKeys = weekKeys.filter(i => {
                const notes = weeklyNotes[i];
                const title = notes.title.toLowerCase();
                const content = notes.content.toLowerCase();
                
                // If the week is locked, only show it if the week number or title is explicitly searched
                if (isWeekLocked(i) && !String(i).includes(query) && !title.includes(query)) {
                    return false;
                }
                
                // Search by keyword in title or content (only for unlocked content, or if number/title matches for locked)
                if (title.includes(query) || (notes && notes.content.toLowerCase().includes(query) && notes.content !== "EXAM_WEEK_MID1_TRIGGER") ) {
                    return true;
                }
                
                // Search by number alone
                if (String(i).includes(query)) {
                    return true;
                }
                
                return false;
            });
            
            renderButtons(filteredKeys);
        }

        // --- Initialization ---
        window.onload = function() {
            loadThemePreference(); // Check for dark mode preference
            const allKeys = Object.keys(weeklyNotes).map(key => parseInt(key)).sort((a, b) => a - b);
            renderButtons(allKeys); // Render all buttons initially
            
            // Ensure initial state is Home View
            showHome();
        };
    </script>
    
</body>
</html>
